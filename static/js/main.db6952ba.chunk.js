(this.webpackJsonpconsiglieri=this.webpackJsonpconsiglieri||[]).push([[0],{112:function(e,t,c){e.exports={page:"styles_page__1rWh3",container:"styles_container__kyDxs",wrapper:"styles_wrapper__3qK51"}},160:function(e,t,c){},292:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(26),i=c.n(s),r=(c(160),c(161),c(66),c(59),c(12)),o=c.n(r),l=c(141),j=c(32),d=c(27),u=c(7),b=c(300),h=c(154),O=c(16),p=c.p+"static/media/home.c9ea5769.svg",x=c.p+"static/media/book.0f7da948.svg",f=c.p+"static/media/logout.dce23d68.svg",m=c.p+"static/media/account.793a5b3b.svg",g=c(94),v=(c(163),c(294),c(293),g.a.initializeApp({apiKey:"AIzaSyA-RGak6Miu0GTUB-ibYNCnpKoae6DheJM",authDomain:"daydairy-ec7ff.firebaseapp.com",projectId:"daydairy-ec7ff",storageBucket:"daydairy-ec7ff.appspot.com",messagingSenderId:"1061735563024",appId:"1:1061735563024:web:7f9a7e7cd0fa4253cbaf95",measurementId:"G-FP7E2J3Q0K"})),w=v.auth(),y=v.storage(),N=new g.a.auth.GoogleAuthProvider,S=function(){w.signInWithPopup(N)},k=new g.a.auth.FacebookAuthProvider,L=function(){w.signInWithPopup(k)},C=v.firestore(),_=c(1),D=a.a.createContext();function U(){return Object(n.useContext)(D)}function R(e){var t=e.children,c=Object(n.useState)(),a=Object(u.a)(c,2),s=a[0],i=a[1],r=Object(n.useState)(!0),o=Object(u.a)(r,2),l=o[0],j=o[1];Object(n.useEffect)((function(){return w.onAuthStateChanged((function(e){i(e),j(!1)}))}),[]);var d={currentUser:s,login:function(e,t){return w.signInWithEmailAndPassword(e,t)},signup:function(e,t){return w.createUserWithEmailAndPassword(e,t)},logout:function(){return w.signOut()},updatePhotoURL:function(e){return s.updateProfile({photoURL:e})},resetPassword:function(e){return w.sendPasswordResetEmail(e)},updateEmail:function(e){return s.updateEmail(e)},updateDisplayName:function(e){return s.updateProfile({displayName:e})},updatePassword:function(e){return s.updatePassword(e)}};return Object(_.jsx)(D.Provider,{value:d,children:!l&&t})}var E=c(17),F=c(22),P=c(91),B=c.p+"static/media/search.6c95e853.svg",G=c(299),I=c(301);function A(){var e,t,c,a=Object(n.useState)(""),s=Object(u.a)(a,2),i=s[0],r=s[1],g=Object(n.useState)([]),v=Object(u.a)(g,2),w=v[0],y=v[1],N=Object(n.useRef)(""),S=U(),k=S.currentUser,L=S.logout,D=Object(E.f)(),R=Object(n.useState)(!1),A=Object(u.a)(R,2),H=A[0],T=A[1],M=Object(n.useState)(null),K=Object(u.a)(M,2),q=K[0],W=K[1],z=Object(n.useRef)(null);function V(){return(V=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,L();case 4:D.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function J(e){e.preventDefault(),y([]),C.collection("stories").where("name","==",N.current.value).get().then((function(e){e.forEach((function(e){y((function(t){return[].concat(Object(j.a)(t),[e.data().createdBy])}))}))})),T(!H),W(e.target)}null===k?(e=Object(_.jsx)("p",{children:Object(_.jsx)(F.b,{to:"/login",children:"Login"})}),t=m,c="/login"):(e=Object(_.jsx)("p",{children:k.displayName}),t=k.photoURL,c="/setting");Object.values(w);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(b.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"light",variant:"light",children:[Object(_.jsx)(b.a.Brand,{href:"/",children:"Consigliere"}),Object(_.jsx)(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(_.jsxs)(b.a.Collapse,{id:"responsive-navbar-nav",children:[Object(_.jsxs)(h.a,{className:"mr-auto va",children:[Object(_.jsxs)(h.a.Link,{href:"/",children:[Object(_.jsx)("img",{src:p,width:"30",height:"30",alt:"home button"}),Object(_.jsx)("p",{children:"Home"})]}),Object(_.jsxs)(h.a.Link,{href:"/profile",children:[Object(_.jsx)("img",{src:x,width:"30",height:"30",alt:"Book"}),Object(_.jsx)("p",{children:"Book"})]}),Object(_.jsx)(h.a.Link,{href:c,children:Object(_.jsx)("img",{src:t,width:"30",height:"30",alt:"avatar",id:"avatar"})}),Object(_.jsx)(h.a.Link,{href:c,children:Object(_.jsx)("p",{className:"name",children:e})})]}),i&&Object(_.jsx)(P.a,{varient:"danger",children:i}),Object(_.jsxs)(O.a,{onSubmit:J,children:[Object(_.jsxs)("div",{className:"searchBar",ref:z,children:[Object(_.jsx)(O.a.Control,{size:"sm",type:"text",ref:N,required:!0,defaultValue:"Find Someone",className:"search"}),Object(_.jsx)(h.a.Link,{onClick:J,children:Object(_.jsx)("img",{src:B,width:"30",height:"30",alt:"Search button",type:"submit"})})]}),Object(_.jsx)(G.a,{show:H,target:q,placement:"bottom",container:z.current,containerPadding:-10,children:Object(_.jsx)(I.a,{id:"popover-container",children:w.map((function(e,t){return Object(l.a)(e),Object(_.jsx)("p",{children:w[t]})}))})})]}),Object(_.jsx)(h.a,{children:Object(_.jsx)(h.a.Link,{eventKey:2,onClick:function(){return V.apply(this,arguments)},children:Object(_.jsx)("img",{src:f,width:"30",height:"30",className:"d-inline-block align-top",alt:"Logout"})})})]})]}),Object(_.jsx)("hr",{})]})}var H=c(116),T=c(96),M=c(146),K=c(147),q=c(145),W=c.n(q),z=c(13),V=c(42),J=c(112),Q=c.n(J),Y=c.p+"static/media/buttons.f2acbf2e.svg";function Z(){var e=U().currentUser,t=Object(n.useRef)(0),c=Object(M.a)(),a=Object(u.a)(c,2),s=a[0],i=a[1].width,r=Object(n.useState)([]),l=Object(u.a)(r,2),j=l[0],b=l[1],h=Object(n.useState)("none"),O=Object(u.a)(h,2),p=O[0],x=O[1],f=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],a=t[1],s=Object(n.useRef)(),i=function(){a(s.current.getVoices())};return Object(n.useEffect)((function(){if("object"===typeof window&&window.speechSynthesis)return s.current=window.speechSynthesis,s.current.onvoiceschanged=i,i(),function(){s.current.onvoiceschanged=null}}),[]),[c,function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=new SpeechSynthesisUtterance(e);a.voice=t,a.pitch=c,a.rate=n,s.current.speak(a),a.onerror=function(e){console.log("An error has occurred with the speech synthesis: "+e.error)}}]}(),m=Object(u.a)(f,2),g=m[0],v=m[1],w=Object(n.useState)(),y=Object(u.a)(w,2),N=y[0],S=y[1],k=Object(T.useSprings)(j.length,(function(e){return{x:e*i,scale:0===i?0:1,display:"block"}}),[i]),L=Object(u.a)(k,2),D=L[0],R=L[1],E=Object(K.a)((function(e){var c=e.active,n=Object(u.a)(e.movement,1)[0],a=Object(u.a)(e.direction,1)[0],s=e.distance,r=e.cancel;c&&s>i/2&&(t.current=W()(t.current+(a>0?-1:1),0,j.length-1),r()),R.start((function(e){return e<t.current-1||e>t.current+1?{display:"none"}:{x:(e-t.current)*i+(c?n:0),scale:c?1-s/i/2:1,display:"block"}}))}));Object(n.useEffect)((function(){C.collection("stories").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))}),[e]),Object(n.useEffect)((function(){N||S(g.filter((function(e){return e.default}))[0]||g[0])}),[g,N]);var F=function(e){S(g.filter((function(t){return t.name===e.target.value}))[0])},P=function(){var e=Object(d.a)(o.a.mark((function e(t){var c,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="Title of the story."+t.title,e.next=3,v(c,N);case 3:(n=document.createElement("DIV")).innerHTML=t.story,a="story."+n.textContent,v(a,N);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){x("none"===p?"flex":"none")};return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{ref:s,className:Q.a.wrapper,children:D.map((function(e,t){var c=e.x,a=e.display,s=e.scale;return Object(_.jsx)(_.Fragment,{children:Object(n.createElement)(T.animated.div,Object(H.a)(Object(H.a)({className:Q.a.page},E()),{},{key:t,style:{display:a,x:c}}),Object(_.jsx)(T.animated.div,{style:{scale:s},className:"bg",children:Object(_.jsxs)(z.a,{className:"page",style:{width:i},children:[Object(_.jsx)("a",{href:"/user/"+j[t].createdBy,className:"a",children:Object(_.jsxs)(z.a.Header,{className:"cardHeader",children:[Object(_.jsx)("img",{src:j[t].photo,alt:"",className:"cardPhoto"}),Object(_.jsx)("h3",{style:{marginTop:10},children:j[t].name})]})}),Object(_.jsxs)(z.a.Header,{className:"cardHeader1",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:j[t].title}),Object(_.jsxs)("h4",{children:[j[t].time," ",j[t].date]})]}),Object(_.jsx)("img",{src:Y,alt:"",className:"Menu",onClick:B}),Object(_.jsx)("div",{className:"pop",style:{display:p},children:Object(_.jsxs)("div",{className:"modal-content",children:[Object(_.jsx)("span",{className:"close",onClick:B,children:"\xd7"}),Object(_.jsx)("form",{className:"contain",children:Object(_.jsx)("div",{className:"select",children:Object(_.jsx)("select",{value:N?N.name:"",onChange:F,children:g.map((function(e){return Object(_.jsx)("option",{value:e.name,children:"".concat(e.name)})}))})})}),Object(_.jsx)(V.a,{className:"narrate",onClick:function(){P(j[t])},children:"Narrate"})]})})]}),Object(_.jsx)(z.a.Body,{children:Object(_.jsx)("div",{id:"story",children:Object(_.jsx)("p",{dangerouslySetInnerHTML:{__html:j[t].story}})})})]})},t))})}))})})}var $=c(155),X=c(114),ee=c(148),te=c.n(ee),ce=c(23);c(275);function ne(){var e=U().currentUser,t=Object(E.f)(),c=Object(n.useRef)(""),a=Object(n.useState)(""),s=Object(u.a)(a,2),i=s[0],r=s[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(n.useState)(null),h=Object(u.a)(b,2),p=h[0],x=h[1],f=Object(n.useState)(!1),m=Object(u.a)(f,2),g=m[0],v=m[1],w=Object(n.useState)(null),N=Object(u.a)(w,2),S=N[0],k=N[1],L=new Date,D=L.getFullYear()+"-"+(L.getMonth()+1)+"-"+L.getDate(),R=L.getHours()+":"+L.getMinutes()+":"+L.getSeconds();null===e&&t.push("/");var F=function(){return Object(_.jsx)("div",{id:"toolbar"})};return Object(n.useEffect)((function(){C.collection("users").doc(e.uid).collection("personalData").doc("cover").get().then((function(e){if(e.exists){var t=e.data();x(t.Url)}else r("No cover found")}))}),[e]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"My book"})}),Object(_.jsxs)(z.a,{children:[i&&Object(_.jsx)(P.a,{variant:"danger",children:i}),Object(_.jsx)(z.a.Body,{children:Object(_.jsxs)($.a,{defaultActiveKey:"scribe",id:"uncontrolled-tab",children:[Object(_.jsxs)(X.a,{eventKey:"scribe",title:"Sribe",children:[Object(_.jsx)("hr",{}),Object(_.jsxs)(O.a,{onSubmit:function(n){n.preventDefault(),v(!0),C.collection("stories").doc().set({title:c.current.value,date:D,time:R,story:j,createdBy:e.uid,like:0,name:e.displayName,photo:e.photoURL}).then((function(){t.push("/")})).catch((function(e){r(e)}))},children:[Object(_.jsx)(O.a.Label,{children:Object(_.jsx)("h4",{children:"Title"})}),Object(_.jsx)(O.a.Control,{ref:c,type:"Text"}),Object(_.jsx)(O.a.Label,{children:Object(_.jsx)("h4",{children:"Story"})}),Object(_.jsx)(F,{}),Object(_.jsx)(te.a,{value:j,onChange:function(e){d(e)}.bind(j)}),Object(_.jsx)("br",{}),Object(_.jsx)(V.a,{disabled:g,type:"submit",children:"Post"})]})]}),Object(_.jsxs)(X.a,{eventKey:"changeCover",title:"Book Cover",children:[Object(_.jsx)("hr",{}),Object(_.jsx)(O.a.File,{accept:"image/*",type:"file",id:"fileUpload",onChange:function(e){e.preventDefault(),k(e.target.files[0]),x({files:URL.createObjectURL(e.target.files[0])})}}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{children:[p&&Object(_.jsx)("img",{src:p,alt:"",className:"cover"}),Object(_.jsx)(V.a,{disabled:g,onClick:function(t){t.preventDefault(),v(!0),null!==S?y.ref("/cover/".concat(e.uid)).put(S).on("state_changed",(function(){y.ref("cover").child(e.uid).getDownloadURL().then((function(t){C.collection("users").doc(e.uid).collection("personalData").doc("cover").set({Url:t}),v(!1)}))})):r("Server Error")},children:"Save"})]})]})]})})]})]})}function ae(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=U(),s=a.signup,i=a.currentUser,r=Object(n.useState)(""),l=Object(u.a)(r,2),j=l[0],b=l[1],h=Object(n.useState)(!1),p=Object(u.a)(h,2),x=p[0],f=p[1],m=Object(E.f)();function g(){return(g=Object(d.a)(o.a.mark((function n(a){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),t.current.value===c.current.value){n.next=3;break}return n.abrupt("return",b("Passwords do not match"));case 3:return n.prev=3,b(""),n.next=7,s(e.current.value,t.current.value);case 7:m.push("/setting"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),b("E-Mail already exist.use another account or Log in");case 13:f(!1);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))).apply(this,arguments)}return null!==i&&m.push("/"),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"Signup"})}),Object(_.jsx)(z.a,{children:Object(_.jsxs)(z.a.Body,{children:[Object(_.jsx)("h2",{children:"Signup"}),j&&Object(_.jsx)(P.a,{variant:"danger",fade:!1,children:j}),Object(_.jsxs)(O.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(_.jsxs)(O.a.Group,{id:"email",children:[Object(_.jsx)(O.a.Label,{children:"Email"}),Object(_.jsx)(O.a.Control,{type:"email",ref:e,placeholder:"Email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",required:!0})]}),Object(_.jsxs)(O.a.Group,{id:"password",children:[Object(_.jsx)(O.a.Label,{children:"password"}),Object(_.jsx)(O.a.Control,{type:"password",ref:t,placeholder:"Password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",required:!0})]}),Object(_.jsxs)(O.a.Group,{id:"password-confirm",children:[Object(_.jsx)(O.a.Label,{children:"Password Confirmation"}),Object(_.jsx)(O.a.Control,{type:"password",ref:c,placeholder:"Confirm Password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",required:!0})]}),Object(_.jsx)(V.a,{disabled:x,className:"w-100",children:"Submit"}),Object(_.jsxs)("div",{className:"separator",children:[Object(_.jsx)("div",{className:"line"}),Object(_.jsx)("h6",{children:"or"}),Object(_.jsx)("div",{className:"line"})]}),Object(_.jsxs)("div",{className:"buttons",children:[Object(_.jsx)("div",{className:"gbutton",children:Object(_.jsxs)("div",{className:"google-btn",onClick:function(e){e.preventDefault(),b("");try{S()}catch(t){b("Unexpected error occured")}},children:[Object(_.jsx)("div",{className:"google-icon-wrapper",children:Object(_.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:""})}),Object(_.jsx)("p",{className:"btn-text",children:Object(_.jsx)("b",{children:"Sign in with Google"})})]})}),Object(_.jsx)("div",{className:"fbutton",children:Object(_.jsxs)("div",{className:"face-btn",onClick:function(e){e.preventDefault(),b("");try{L()}catch(t){b("Account already logged in with Google")}},children:[Object(_.jsx)("div",{className:"Face-icon-wrapper",children:Object(_.jsx)("img",{className:"face-icon",src:"https://upload.wikimedia.org/wikipedia/commons/f/fb/Facebook_icon_2013.svg",alt:""})}),Object(_.jsx)("p",{className:"btn-text",children:Object(_.jsx)("b",{children:"Sign in with Facebook"})})]})})]})]})]})}),Object(_.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(_.jsx)(F.b,{to:"/login",children:"Log In"})]})]})}function se(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=U(),a=c.login,s=c.currentUser,i=Object(n.useState)(""),r=Object(u.a)(i,2),l=r[0],j=r[1],b=Object(n.useState)(!1),h=Object(u.a)(b,2),p=h[0],x=h[1],f=Object(E.f)();function m(){return(m=Object(d.a)(o.a.mark((function c(n){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,j(""),x(!0),c.next=6,a(e.current.value,t.current.value);case 6:f.push("/"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),j("Incorrect Password or Email Id");case 12:x(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return null!==s&&f.push("/"),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"login"})}),Object(_.jsx)(z.a,{children:Object(_.jsxs)(z.a.Body,{children:[Object(_.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),l&&Object(_.jsx)(P.a,{variant:"danger",children:l}),Object(_.jsxs)(O.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(_.jsxs)(O.a.Group,{id:"email",children:[Object(_.jsx)(O.a.Label,{children:"Email"}),Object(_.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(_.jsxs)(O.a.Group,{id:"password",children:[Object(_.jsx)(O.a.Label,{children:"Password"}),Object(_.jsx)(O.a.Control,{type:"password",ref:t,pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",required:!0})]}),Object(_.jsx)(V.a,{disabled:p,className:"w-100",type:"submit",children:"Log In"})]}),Object(_.jsx)("div",{className:"w-100 text-center mt-3",children:Object(_.jsx)(F.b,{to:"/forget",children:"Forgot Password?"})}),Object(_.jsxs)("div",{className:"separator",children:[Object(_.jsx)("div",{className:"line"}),Object(_.jsx)("h6",{children:"or"}),Object(_.jsx)("div",{className:"line"})]}),Object(_.jsxs)("div",{className:"buttons",children:[Object(_.jsx)("div",{className:"gbutton",children:Object(_.jsxs)("div",{className:"google-btn",onClick:function(e){e.preventDefault(),j("");try{S()}catch(t){j("Unexpected error occured")}},children:[Object(_.jsx)("div",{className:"google-icon-wrapper",children:Object(_.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:""})}),Object(_.jsx)("p",{className:"btn-text",children:Object(_.jsx)("b",{children:"Login with Google"})})]})}),Object(_.jsx)("div",{className:"fbutton",children:Object(_.jsxs)("div",{className:"face-btn",onClick:function(e){e.preventDefault(),j("");try{L()}catch(t){j("Account already logged in with Google")}},children:[Object(_.jsx)("div",{className:"Face-icon-wrapper",children:Object(_.jsx)("img",{className:"face-icon",src:"https://upload.wikimedia.org/wikipedia/commons/f/fb/Facebook_icon_2013.svg",alt:""})}),Object(_.jsx)("p",{className:"btn-text",children:Object(_.jsx)("b",{children:"Login with Facebook"})})]})})]})]})}),Object(_.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(_.jsx)(F.b,{to:"/signup",children:"Sign Up"})]})]})}function ie(){var e=Object(n.useRef)(),t=Object(E.f)(),c=U(),a=c.resetPassword,s=c.currentUser,i=Object(n.useState)(""),r=Object(u.a)(i,2),l=r[0],j=r[1],b=Object(n.useState)(""),h=Object(u.a)(b,2),p=h[0],x=h[1],f=Object(n.useState)(!1),m=Object(u.a)(f,2),g=m[0],v=m[1];function w(){return(w=Object(d.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,x(""),j(""),v(!0),t.next=7,a(e.current.value);case 7:x("Check your inbox for further instructions"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),j("Failed to reset password");case 13:v(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}return null===s&&t.push("/"),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"forget password"})}),Object(_.jsx)(z.a,{children:Object(_.jsxs)(z.a.Body,{children:[Object(_.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),l&&Object(_.jsx)(P.a,{variant:"danger",children:l}),p&&Object(_.jsx)(P.a,{variant:"success",children:p}),Object(_.jsxs)(O.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(_.jsxs)(O.a.Group,{id:"email",children:[Object(_.jsx)(O.a.Label,{children:"Email"}),Object(_.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(_.jsx)(V.a,{disabled:g,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(_.jsx)("div",{className:"w-100 text-center mt-3",children:Object(_.jsx)(F.b,{to:"/login",children:"Login"})})]})}),Object(_.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(_.jsx)(F.b,{to:"/signup",children:"Sign Up"})]})]})}var re=c(92),oe=c(58),le=c.p+"static/media/edit.e97dc842.svg",je=(c(276),c(151)),de=c.n(je),ue=(c(277),c(152));function be(){var e=Object(n.useRef)(),t=Object(n.useRef)(""),c=new Date,a=Object(n.useState)(""),s=Object(u.a)(a,2),i=s[0],r=s[1],o=c.getDate(),l=c.getMonth(),j=c.getFullYear(),d=Object(n.useRef)(j,"-",l,"-",o),b=U(),h=b.currentUser,p=b.updateDisplayName,x=b.updatePhotoURL,f=Object(n.useState)(""),m=Object(u.a)(f,2),g=m[0],v=m[1],w=Object(n.useState)(!1),N=Object(u.a)(w,2),S=N[0],k=N[1],L=Object(E.f)(),D=Object(n.useState)(null),R=Object(u.a)(D,2),F=R[0],B=R[1],G=Object(n.useState)({files:null}),I=Object(u.a)(G,2),A=I[0],H=I[1],T=C.collection("users").doc(h.uid).collection("personalData"),M=Object(n.useState)(null),K=Object(u.a)(M,2),q=K[0],W=K[1],J=Object(n.useState)({unit:"%",width:30,height:30}),Q=Object(u.a)(J,2),Y=Q[0],Z=Q[1],$=Object(n.useState)(!1),X=Object(u.a)($,2),ee=X[0],te=X[1];return null===h&&L.push("/"),Object(n.useEffect)((function(){T.doc("info").get().then((function(e){if(e.exists){var t=e.data();r(t)}}))}),[T]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"Settings"})}),g&&Object(_.jsx)(P.a,{variant:"danger",children:g}),Object(_.jsx)(oe.a,{defaultActiveKey:"0",children:Object(_.jsxs)(z.a,{children:[Object(_.jsx)(oe.a.Toggle,{as:z.a.Header,eventKey:"0",children:Object(_.jsx)("h2",{children:"Profile"})}),Object(_.jsx)(oe.a.Collapse,{eventKey:"0",children:Object(_.jsx)(z.a.Body,{children:Object(_.jsxs)(O.a,{onSubmit:function(c){!function(e){if(e.preventDefault(),null!==F){var t=[];y.ref("/images/".concat(h.uid)).put(F).on("state_changed",console.log,console.error,(function(){y.ref("images").child(h.uid).getDownloadURL().then((function(e){t.push(x(e))}))}))}else v("Unexpected Error Occured")}(c),function(t){t.preventDefault();var c=[];k(!0),v(""),e!==h.displayName?(c.push(p(e.current.value)),C.collection("stories").where("createdBy","==",h.uid).get().then((function(t){t.docs.forEach((function(t){C.collection("stories").doc(t.id).update({name:e.current.value})}))}))):v("Name is same as old one"),Promise.all(c).then((function(){L.push("/")})).catch((function(){v("Failed to update Account")})).finally((function(){k(!1)}))}(c),T.doc("info").set({name:h.displayName,photoURL:h.photoURL,discription:t.current.value,Email:h.email,DOB:d.current.value}).then((function(){console.log("Document Succesfully Upload!")})).catch((function(e){console.log(e)}))},children:[Object(_.jsx)(O.a.Group,{children:Object(_.jsxs)("div",{className:"profile",children:[Object(_.jsx)("img",{src:A.files||h.photoURL,height:"200px",width:"200px",className:"profilephoto",alt:""}),Object(_.jsx)(re.a,{htmlFor:"fileUpload",children:Object(_.jsx)("img",{src:le,alt:""})}),Object(_.jsx)(O.a.File,{accept:"image/*",type:"file",id:"fileUpload",onChange:function(e){B(e.target.files[0]),H({files:URL.createObjectURL(e.target.files[0])}),te(!0)},hidden:!0}),A&&Object(_.jsx)(ue.a,{open:ee,modal:!0,nested:!0,children:Object(_.jsxs)("div",{className:"image-fluid",children:[Object(_.jsx)(de.a,{src:A.files,onImageLoaded:W,crop:Y,onChange:Z}),Object(_.jsx)(V.a,{className:"btn",onClick:function(){var e=document.createElement("canvas"),t=q.naturalWidth/q.width,c=q.naturalHeight/q.height;e.width=Y.width,e.height=Y.height,e.getContext("2d").drawImage(q,Y.x*t,Y.y*c,Y.width*t,Y.height*c,0,0,Y.width,Y.height);var n=e.toDataURL("image/jpge");H({files:n}),e.toBlob((function(e){B(e)})),te(!1)},children:"Save"})]})})]})}),Object(_.jsxs)(O.a.Group,{children:[Object(_.jsx)(O.a.Label,{children:"Display Name"}),Object(_.jsx)(O.a.Control,{type:"text",ref:e,required:!0,defaultValue:h.displayName}),Object(_.jsx)(O.a.Text,{children:"Set Writteres Name"}),Object(_.jsx)(O.a.Label,{children:"Epigraph"}),Object(_.jsx)(O.a.Control,{type:"text",minLength:"20",ref:t,defaultValue:i.discription,required:!0}),Object(_.jsx)(O.a.Text,{children:"a short phrase or sentence on your book"}),Object(_.jsx)("br",{}),Object(_.jsx)(V.a,{disabled:S,type:"submit",children:"Save"})]})]})})}),Object(_.jsx)(oe.a.Toggle,{as:z.a.Header,eventKey:"1",children:Object(_.jsx)("h2",{children:"Account"})}),Object(_.jsx)(oe.a.Collapse,{eventKey:"1",children:Object(_.jsx)(z.a.Body,{children:Object(_.jsxs)(O.a,{children:[Object(_.jsx)(O.a.Label,{children:"Date of Birth"}),Object(_.jsx)(O.a.Control,{type:"Date",ref:d,defaultValue:i.DOB,max:j+"-"+l+"-"+o,required:!0}),Object(_.jsx)(O.a.Label,{children:"Email"}),Object(_.jsx)(O.a.Control,{type:"email",defaultValue:h.email}),Object(_.jsx)(V.a,{disabled:S,children:"Save"})]})})})]})})]})}var he=c(89);function Oe(){var e=U().currentUser,t=Object(E.f)(),c=Object(n.useRef)(),a=Object(n.useState)(""),s=Object(u.a)(a,2),i=s[0],r=s[1],o=Object(n.useState)("This is dicription"),l=Object(u.a)(o,2),j=l[0],d=l[1];null===e&&t.push("/");var b=Object(n.useState)([]),h=Object(u.a)(b,2),O=h[0],p=h[1];return Object(n.useEffect)((function(){C.collection("stories").where("createdBy","==",e.uid).onSnapshot((function(e){return p(e.docs.map((function(e){return e.data()})))})),C.collection("users").doc(e.uid).collection("personalData").doc("cover").get().then((function(e){e.exists&&r(e.data().Url)})),C.collection("users").doc(e.uid).collection("personalData").doc("info").get().then((function(e){if(e.exists){var t=e.data();d(t)}}))}),[e]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:e.displayName})}),Object(_.jsxs)(z.a,{children:[Object(_.jsxs)("div",{className:"profile_card",children:[Object(_.jsx)("div",{className:"profile_card__image",children:Object(_.jsx)("img",{src:e.photoURL,alt:"",className:"profile_photo"})}),Object(_.jsxs)("div",{className:"profile_card__text",children:[Object(_.jsx)("h3",{children:e.displayName}),Object(_.jsx)("p",{children:j.discription})]}),Object(_.jsx)(V.a,{className:"top_buttons",onClick:function(){t.push("/book")},children:"New Story"}),Object(_.jsx)(V.a,{className:"top_buttons",onClick:function(){t.push("/setting")},children:"Edit Profile"})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"follower",children:[Object(_.jsxs)("p",{children:[j.following,Object(_.jsx)("h4",{children:"following"})]}),Object(_.jsxs)("p",{children:[j.followed,Object(_.jsx)("h4",{children:"followers"})]})]})]}),Object(_.jsx)(z.a,{children:Object(_.jsx)(z.a.Body,{children:Object(_.jsxs)(he.a,{drawShadow:"false",width:550,height:900,size:"stretch",ref:c,minWidth:315,maxWidth:1100,minHeight:400,maxHeight:1e4,maxShadowOpacity:.5,showCover:!0,mobileScrollSupport:!0,children:[Object(_.jsx)("div",{children:i&&Object(_.jsx)("img",{src:i,className:"cover",alt:""})}),Object(_.jsx)("div",{children:"Front-Back"}),O.map((function(e){var t=e.date,c=e.story,n=e.time,a=e.title;return Object(_.jsxs)("div",{className:"page",children:[Object(_.jsx)("h2",{children:a}),Object(_.jsxs)("h4",{children:[t," ",n]}),Object(_.jsx)("p",{dangerouslySetInnerHTML:{__html:c}})]})}))]})})})]})}function pe(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:"No Match"})}),Object(_.jsx)(z.a,{children:Object(_.jsx)("img",{src:"https://miro.medium.com/max/800/1*hFwwQAW45673VGKrMPE2qQ.png",height:"100%",weight:"100%",alt:"404"})})]})}function xe(){var e=Object(E.g)().id,t=Object(E.f)(),c=U().currentUser,a=Object(n.useState)(""),s=Object(u.a)(a,2),i=s[0],r=s[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(n.useState)(null),h=Object(u.a)(b,2),O=h[0],p=h[1],x=Object(n.useState)(!1),f=Object(u.a)(x,2),m=f[0],g=f[1],v=Object(n.useState)(!1),w=Object(u.a)(v,2),y=w[0],N=w[1];function S(){null!==c?(g(!0),C.collection("users").doc(c.uid).collection("following").add({id:e}).then((function(){C.collection("users").doc(c.uid).collection("personalData").doc("info").update({following:Number(i.following)+1})})),C.collection("users").doc(e).collection("followed").add({id:c.uid}).then((function(){C.collection("users").doc(e).collection("personalData").doc("info").update({followed:Number(i.followed)+1})}))):t.push("/login")}function k(){null!==c?(g(!0),C.collection("users").doc(c.uid).collection("following").where("id","==",e).get().then((function(e){e.forEach((function(e){e.ref.delete(),C.collection("users").doc(c.uid).collection("personalData").doc("info").update({following:Number(i.following)-1})}))})),C.collection("users").doc(e).collection("followed").where("id","==",c.uid).then((function(){C.collection("users").doc(e).collection("personalData").doc("info").update({following:Number(i.following)-1})}))):t.push("/login")}e===c.uid&&t.push("/profile"),Object(n.useEffect)((function(){C.collection("stories").where("createdBy","==",e).onSnapshot((function(e){return d(e.docs.map((function(e){return e.data()})))})),C.collection("users").doc(e).collection("personalData").doc("cover").get().then((function(e){e.exists&&p(e.data().Url)})),C.collection("users").doc(e).collection("personalData").doc("info").get().then((function(e){if(e.exists){var c=e.data();r(c)}else t.push("/nomatch")})),C.collection("users").doc(c.uid).collection("following").where("id","==",e).get().then((function(e){e.forEach((function(e){e.exists?N(!0):N(!1)}))}))}),[c,e,y,t]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ce.a,{children:Object(_.jsx)("title",{children:i.name})}),Object(_.jsxs)(z.a,{children:[Object(_.jsxs)("div",{className:"profile_card",children:[Object(_.jsx)("div",{className:"profile_card__image",children:Object(_.jsx)("img",{src:i.photoURL,alt:"",className:"profile_photo"})}),Object(_.jsxs)("div",{className:"profile_card__text",children:[Object(_.jsx)("h3",{children:i.name}),Object(_.jsx)("p",{children:i.discription})]}),!0!==y?Object(_.jsx)(V.a,{disabled:m,className:"top_buttons",onClick:S,children:"follow"}):Object(_.jsx)(V.a,{disabled:m,className:"top_buttons",onClick:k,children:"unfollow"})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"follower",children:[Object(_.jsxs)("p",{children:[i.following,Object(_.jsx)("h4",{children:"following"})]}),Object(_.jsxs)("p",{children:[i.followed,Object(_.jsx)("h4",{children:"followers"})]})]})]}),Object(_.jsx)(z.a,{children:Object(_.jsx)(z.a.Body,{children:Object(_.jsxs)(he.a,{drawShadow:"false",width:550,height:900,size:"stretch",minWidth:315,maxWidth:1100,minHeight:400,maxHeight:1e4,maxShadowOpacity:.5,showCover:!0,mobileScrollSupport:!0,children:[Object(_.jsx)("div",{children:O&&Object(_.jsx)("img",{src:O,className:"cover",alt:""})}),Object(_.jsx)("div",{children:"Back-Cover"}),j.map((function(e){var t=e.date,c=e.story,n=e.time,a=e.title;return Object(_.jsxs)("div",{className:"page",children:[Object(_.jsx)("h2",{children:a}),Object(_.jsxs)("h4",{children:[t," ",n]}),Object(_.jsx)("p",{dangerouslySetInnerHTML:{__html:c}})]})}))]})})})]})}function fe(){return Object(_.jsx)(R,{children:Object(_.jsxs)(F.a,{children:[Object(_.jsx)(A,{}),Object(_.jsxs)(E.c,{children:[Object(_.jsx)(E.a,{path:"/",exact:!0,component:Z}),Object(_.jsx)(E.a,{path:"/book",exact:!0,component:ne}),Object(_.jsx)(E.a,{path:"/Signup",exact:!0,component:ae}),Object(_.jsx)(E.a,{path:"/Login",exact:!0,component:se}),Object(_.jsx)(E.a,{path:"/forget",exact:!0,component:ie}),Object(_.jsx)(E.a,{path:"/setting",exact:!0,component:be}),Object(_.jsx)(E.a,{path:"/profile",exact:!0,component:Oe}),Object(_.jsx)(E.a,{path:"/user/:id",component:xe}),Object(_.jsx)(E.a,{path:"*",component:pe})]})]})})}var me=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,302)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(fe,{})}),document.getElementById("root")),me()},59:function(e,t,c){},66:function(e,t,c){}},[[292,1,2]]]);
//# sourceMappingURL=main.db6952ba.chunk.js.map